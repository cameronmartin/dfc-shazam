name: "go_multistage_static"
description: "Go multi-stage build to static binary"
language: "go"
complexity: "moderate"
tags: [go, multistage, static, scratch]

source:
  base_image: "golang:1.21"
  package_manager: "none"
  packages: []

expected:
  base_image: "cgr.dev/chainguard/static:latest"
  packages: []

build:
  dockerfile: "Dockerfile"

runtime:
  enabled: true
  healthcheck:
    type: "http"
    port: 8080
    path: "/health"
    timeout: 30

multistage:
  enabled: true
  stages: 2
  final_stage_name: ""
