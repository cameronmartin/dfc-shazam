name: "node_nextjs_multistage"
description: "Next.js app with multi-stage build"
language: "node"
complexity: "moderate"
tags: [node, nextjs, multistage, apt]

source:
  base_image: "node:20-slim"
  package_manager: "apt"
  packages: []

expected:
  base_image: "cgr.dev/chainguard/node:latest"
  packages: []

build:
  dockerfile: "Dockerfile"

runtime:
  enabled: true
  healthcheck:
    type: "http"
    port: 3000
    path: "/"
    timeout: 30

multistage:
  stages: 3
  final_stage_name: "runner"
